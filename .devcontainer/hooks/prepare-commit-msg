#!/bin/bash
# Add commit message template with conventional commits hint

COMMIT_MSG_FILE=$1
COMMIT_SOURCE=$2

# Only add template for new commits (not amendments, merges, etc.)
if [ -z "$COMMIT_SOURCE" ]; then
    # Check if file is empty or only has comments
    if ! grep -q '^[^#]' "$COMMIT_MSG_FILE"; then
        cat > "$COMMIT_MSG_FILE" << 'TEMPLATE'
# <type>: <description>
#
# Types: feat, fix, docs, style, refactor, perf, test, build, ci, chore
# Example: feat: add new datasource for workflows
#
# Longer description (optional)
#
# Closes #123 (optional)
TEMPLATE
    fi
fi

exit 0
