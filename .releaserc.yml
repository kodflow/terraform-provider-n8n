# Copyright (c) 2024 Florent (Kodflow). All rights reserved.
# Licensed under the Sustainable Use License 1.0
# See LICENSE.md in the project root for license information.

branches:
  - main

plugins:
  # Analyser les commits conventionnels et dÃ©terminer la version
  - - "@semantic-release/commit-analyzer"
    - preset: "conventionalcommits"
      releaseRules:
        - type: "feat"
          release: "minor"
        - type: "fix"
          release: "patch"
        - type: "perf"
          release: "patch"
        - type: "refactor"
          release: "patch"
        - type: "docs"
          release: false
        - type: "test"
          release: false
        - type: "chore"
          release: false
        - type: "ci"
          release: false
        - type: "build"
          release: "patch"
        - scope: "breaking"
          release: "major"

  # GÃ©nÃ©rer les release notes
  - - "@semantic-release/release-notes-generator"
    - preset: "conventionalcommits"
      presetConfig:
        types:
          - type: "feat"
            section: "ğŸš€ Features"
          - type: "fix"
            section: "ğŸ› Bug Fixes"
          - type: "perf"
            section: "âš¡ Performance"
          - type: "refactor"
            section: "â™»ï¸ Refactoring"
          - type: "build"
            section: "ğŸ”§ Build"
          - type: "docs"
            section: "ğŸ“š Documentation"
          - type: "test"
            section: "âœ… Tests"
          - type: "chore"
            section: "ğŸ§¹ Chores"
          - type: "ci"
            section: "ğŸ‘· CI/CD"

  # NOTE: Changelog generation disabled - will be done in PRs
  # No commits on main after PR merge - keeps history clean

  # Create ONLY the tag (no release draft - GoReleaser will create the release)
  - - "@semantic-release/github"
    - successComment: false
      failComment: false
      releasedLabels: false
      addReleases: false  # Don't create GitHub release - GoReleaser does it

# Options globales
tagFormat: "v${version}"
