# Copyright (c) 2024 Florent (Kodflow). All rights reserved.
# Licensed under the Sustainable Use License 1.0
# See LICENSE.md in the project root for license information.

branches:
  - main

plugins:
  # Analyser les commits conventionnels et dÃ©terminer la version
  - - "@semantic-release/commit-analyzer"
    - preset: "conventionalcommits"
      releaseRules:
        - type: "feat"
          release: "minor"
        - type: "fix"
          release: "patch"
        - type: "perf"
          release: "patch"
        - type: "refactor"
          release: "patch"
        - type: "docs"
          release: false
        - type: "test"
          release: false
        - type: "chore"
          release: false
        - type: "ci"
          release: false
        - type: "build"
          release: "patch"
        - scope: "breaking"
          release: "major"

  # GÃ©nÃ©rer les release notes
  - - "@semantic-release/release-notes-generator"
    - preset: "conventionalcommits"
      presetConfig:
        types:
          - type: "feat"
            section: "ğŸš€ Features"
          - type: "fix"
            section: "ğŸ› Bug Fixes"
          - type: "perf"
            section: "âš¡ Performance"
          - type: "refactor"
            section: "â™»ï¸ Refactoring"
          - type: "build"
            section: "ğŸ”§ Build"
          - type: "docs"
            section: "ğŸ“š Documentation"
          - type: "test"
            section: "âœ… Tests"
          - type: "chore"
            section: "ğŸ§¹ Chores"
          - type: "ci"
            section: "ğŸ‘· CI/CD"

  # NOTE: Changelog generation disabled - will be done in PRs
  # No commits on main after PR merge - keeps history clean

  # Create ONLY the Git tag (no commits, no files updated)
  - - "@semantic-release/git"
    - assets: []  # Empty array = create tag but don't commit any files
      message: ""  # No commit message needed since no files are committed

# Options globales
tagFormat: "v${version}"
