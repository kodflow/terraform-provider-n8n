# Coverage Report

Rapport de couverture gÃ©nÃ©rÃ© automatiquement.

**LÃ©gende:**
- ğŸŸ¢ 100% - Couverture complÃ¨te
- ğŸŸ¡ â‰¥90% - Bonne couverture
- ğŸ”´ <90% - Couverture insuffisante
- âš« 0% - Pas de tests

---

## Coverage par Package

| Icon | Package | Coverage |
|:----:|---------|----------|
| ğŸ”´ | **TOTAL (Global)** | **70.9%** |
| ğŸŸ¢ | `github.com/kodflow/n8n/src/internal/provider` | 100.0% |
| ğŸŸ¢ | `github.com/kodflow/n8n/src/internal/provider/shared/client` | 100.0% |
| ğŸŸ¡ | `github.com/kodflow/n8n/src/internal/provider/workflow` | 83.0% |
| ğŸ”´ | `github.com/kodflow/n8n/src/internal/provider/user` | 78.1% |
| ğŸ”´ | `github.com/kodflow/n8n/src/internal/provider/execution` | 76.6% |
| ğŸ”´ | `github.com/kodflow/n8n/src/internal/provider/variable` | 75.0% |
| ğŸ”´ | `github.com/kodflow/n8n/src/internal/provider/tag` | 71.3% |
| ğŸ”´ | `github.com/kodflow/n8n/src/internal/provider/credential` | 65.2% |
| ğŸ”´ | `github.com/kodflow/n8n/src/internal/provider/sourcecontrol` | 60.0% |
| ğŸ”´ | `github.com/kodflow/n8n/src/internal/provider/project` | 52.4% |

---

## DÃ©tail des packages incomplets

### ğŸŸ¡ `github.com/kodflow/n8n/src/internal/provider/workflow` - 83.0%

**Forces:**
- Tests CRUD complets avec mocking HTTP
- Datasource Read tests implÃ©mentÃ©s
- Transfer resource tests ajoutÃ©s

**Zones Ã  amÃ©liorer:**
| Fichier:Fonction | Couverture |
|------------------|------------|
| ğŸŸ¡ `datasource.go:Read` | 92.9% |
| ğŸŸ¡ `transfer_resource.go:Create` | 92.9% |

### ğŸ”´ `github.com/kodflow/n8n/src/internal/provider/user` - 78.1%

**Forces:**
- Tests CRUD HTTP-mocked
- Datasource Read tests
- Tests de validation email

**Zones Ã  amÃ©liorer:**
| Fichier:Fonction | Couverture |
|------------------|------------|
| âš« `resource.go:NewUserResource` | 0.0% |
| âš« `resource.go:NewUserResourceWrapper` | 0.0% |
| âš« `resource.go:Metadata` | 0.0% |
| âš« `resource.go:Configure` | 0.0% |
| ğŸ”´ `resource.go:Create` | 83.3% |
| ğŸ”´ `datasource.go:Read` | 83.3% |
| âš« `datasources.go:Read` | 0.0% |

### ğŸ”´ `github.com/kodflow/n8n/src/internal/provider/execution` - 76.6%

**Forces:**
- Retry resource tests complets
- Datasource tests implÃ©mentÃ©s

**Zones Ã  amÃ©liorer:**
| Fichier:Fonction | Couverture |
|------------------|------------|
| ğŸ”´ `retry_resource.go:Create` | 81.2% |
| ğŸ”´ `datasource.go:Read` | 81.2% |
| âš« `datasources.go:Read` | 0.0% |

### ğŸ”´ `github.com/kodflow/n8n/src/internal/provider/variable` - 75.0%

**Forces:**
- Tests CRUD complets
- Datasource by ID et by key tests

**Zones Ã  amÃ©liorer:**
| Fichier:Fonction | Couverture |
|------------------|------------|
| ğŸ”´ `resource.go:Create` | 81.8% |
| ğŸ”´ `datasource.go:Read` | 81.8% |
| âš« `datasources.go:Read` | 0.0% |

### ğŸ”´ `github.com/kodflow/n8n/src/internal/provider/tag` - 71.3%

**Forces:**
- Tests CRUD HTTP-mocked
- Datasource Read tests (by ID, by name)

**Zones Ã  amÃ©liorer:**
| Fichier:Fonction | Couverture |
|------------------|------------|
| âš« `resource.go:NewTagResource` | 0.0% |
| âš« `resource.go:NewTagResourceWrapper` | 0.0% |
| âš« `resource.go:Metadata` | 0.0% |
| âš« `resource.go:Configure` | 0.0% |
| ğŸ”´ `resource.go:Create` | 83.3% |
| ğŸ”´ `datasource.go:Read` | 85.7% |
| âš« `datasources.go:Read` | 0.0% |

### ğŸ”´ `github.com/kodflow/n8n/src/internal/provider/credential` - 65.2%

**Forces:**
- Tests CRUD de base
- Transfer resource tests
- Tests de rotation (partiel)

**Zones Ã  amÃ©liorer:**
| Fichier:Fonction | Couverture |
|------------------|------------|
| ğŸŸ¡ `helpers.go:createNewCredential` | 75.0% |
| ğŸ”´ `helpers.go:scanAffectedWorkflows` | 60.0% |
| âš« `helpers.go:updateAffectedWorkflows` | 12.5% |
| ğŸŸ¡ `resource.go:Create` | 90.5% |
| ğŸŸ¡ `transfer_resource.go:Create` | 92.9% |
| ğŸ”´ `transfer_resource.go:Read` | 80.0% |

**ProblÃ¨mes majeurs:**
- La fonction `updateAffectedWorkflows` (12.5%) nÃ©cessite des tests de rollback
- ScÃ©narios de rotation incomplÃ¨te non testÃ©s

### ğŸ”´ `github.com/kodflow/n8n/src/internal/provider/sourcecontrol` - 60.0%

**Ã‰tat actuel:**
- Tests existants pour pull resource
- Pas de tests CRUD HTTP-mocked

**Zones Ã  amÃ©liorer:**
| Fichier:Fonction | Couverture |
|------------------|------------|
| âš« `pull_resource.go:Create` | 0.0% |

### ğŸ”´ `github.com/kodflow/n8n/src/internal/provider/project` - 52.4%

**Forces:**
- Tests CRUD HTTP-mocked de base
- Datasource Read tests

**Zones Ã  amÃ©liorer:**
| Fichier:Fonction | Couverture |
|------------------|------------|
| âš« `resource.go:NewProjectResource` | 0.0% |
| âš« `resource.go:NewProjectResourceWrapper` | 0.0% |
| âš« `resource.go:Metadata` | 0.0% |
| âš« `resource.go:Configure` | 0.0% |
| ğŸ”´ `resource.go:Create` | 81.8% |
| ğŸŸ¡ `datasource.go:Read` | 76.0% |
| âš« `datasources.go:Read` | 0.0% |
| âš« `user_resource.go:NewProjectUserResource` | 0.0% |
| âš« `user_resource.go:NewProjectUserResourceWrapper` | 0.0% |
| âš« `user_resource.go:Metadata` | 0.0% |
| âš« `user_resource.go:Schema` | 0.0% |
| âš« `user_resource.go:Configure` | 0.0% |
| âš« `user_resource.go:Create` | 0.0% |

**ProblÃ¨mes majeurs:**
- User resource non testÃ©e (0%)
- Datasources multiples non testÃ©s (0%)

---

## AmÃ©liorations apportÃ©es

**Progression globale:** 32.6% â†’ 70.9% (+38.3 points)

### Tests ajoutÃ©s

1. **Infrastructure HTTP Mocking**
   - Helper `setupTestClient()` avec httptest
   - Configuration SDK pour tests
   - Gestion correcte des chemins API

2. **Tests CRUD Resources** (7 packages)
   - Project, Variable, Tag, User, Credential, Workflow, Execution
   - ScÃ©narios succÃ¨s et Ã©chec
   - Gestion des Ã©tats Terraform

3. **Tests DataSources** (6 packages)
   - Tag, User, Variable, Project, Workflow, Execution
   - Tests par ID, par nom, not found

4. **Tests Transfer Resources**
   - Credential Transfer (71 tests)
   - Workflow Transfer (46 tests)

### Pour atteindre 90%

**Actions prioritaires:**

1. **Fonctions constructeurs** (0% actuellement)
   - Ajouter tests unitaires simples pour New* et Wrapper
   - EstimÃ©: +5% de couverture

2. **Datasources multiples** (0% actuellement)
   - ImplÃ©menter tests pour datasources.go
   - EstimÃ©: +3% de couverture

3. **Project User Resource** (0% actuellement)
   - Tests CRUD complets avec HTTP mocking
   - EstimÃ©: +4% de couverture

4. **Source Control** (60% actuellement)
   - Tests Create/Read/Delete avec mocking
   - EstimÃ©: +2% de couverture

5. **Credential rotation rollback** (12.5% actuellement)
   - Tests scÃ©narios d'erreur complexes
   - EstimÃ©: +3% de couverture

6. **Edge cases et error paths**
   - Nil checks, validations, error branches
   - EstimÃ©: +3% de couverture

**Total estimÃ© avec ces actions: ~90%**

---

*Rapport gÃ©nÃ©rÃ© le: 2025-11-08*
